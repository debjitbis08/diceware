<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/dice-black.svg" />
    <link rel="icon" type="image/svg+xml" href="/dice-white.svg" media="(prefers-color-scheme: dark)"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diceware | Generate passphrase and random strings using real or virtual dice</title>
    <link rel="stylesheet" href="./src/style.css" />
    <script>
      (function () {
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark')
        } else {
          document.documentElement.classList.remove('dark')
        }

        // Whenever the user explicitly chooses light mode
        // localStorage.theme = 'light'

        // Whenever the user explicitly chooses dark mode
        // localStorage.theme = 'dark'

        // Whenever the user explicitly chooses to respect the OS preference
        // localStorage.removeItem('theme')
      }());
    </script>
  </head>
  <body class="bg-white dark:bg-gray-900 text-black dark:text-white min-h-screen">
      <header class="w-full p-4 bg-gray-100 dark:bg-gray-900 flex justify-between items-center">
        <div class="flex items-center space-x-4">
          <img src="/dice-white.svg" alt="Diceware" class="w-8 h-8">
        </div>
        <div class="flex items-center space-x-2">
            <a href="#faqs" class="text-blue-600 dark:text-blue-400">FAQs</a>
            <div class="pl-2 border-r border-r-gray-500 dark:border-r-gray-600 h-4"></div>
            <div class="relative inline-block text-left">
              <div>
                <button type="button" class="inline-flex justify-center rounded-md px-3 py-2 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-transparent focus:outline-none" id="theme-switcher-button" aria-expanded="true" aria-haspopup="true">
                  <span id="theme-icon">
                    <!-- This will change dynamically -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m6.364 1.636l-.707.707M21 12h-1m-1.636 6.364l-.707-.707M12 21v1m-6.364-1.636l.707-.707M3 12H2m1.636-6.364l.707.707M12 7a5 5 0 100 10 5 5 0 000-10z" />
                    </svg>
                  </span>
                </button>
              </div>

              <!-- Dropdown menu for theme selection -->
              <div id="theme-dropdown" class="absolute right-0 z-10 mt-2 w-36 origin-top-right rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden" role="menu" aria-orientation="vertical" aria-labelledby="theme-switcher-button" tabindex="-1">
                <div role="none">
                  <!-- Light Mode Option -->
                  <button class="px-4 py-2 text-sm flex items-center bg-transparent hover:bg-gray-100 dark:hover:bg-gray-700 w-full rounded-none" role="menuitem" tabindex="-1" id="theme-light">
                    <svg class="mr-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Light
                  </button>

                  <!-- Dark Mode Option -->
                  <button class="px-4 py-2 text-sm flex items-center bg-transparent hover:bg-gray-100 dark:hover:bg-gray-700 w-full rounded-none" role="menuitem" tabindex="-1" id="theme-dark">
                    <svg class="mr-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Dark
                  </button>

                  <!-- System Mode Option -->
                  <button class="px-4 py-2 text-sm flex items-center bg-transparent hover:bg-gray-100 dark:hover:bg-gray-700 w-full rounded-none" role="menuitem" tabindex="-1" id="theme-system">
                    <svg class="mr-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path d="M7 21H17M9 17V21M15 17V21M6.2 17H17.8C18.9201 17 19.4802 17 19.908 16.782C20.2843 16.5903 20.5903 16.2843 20.782 15.908C21 15.4802 21 14.9201 21 13.8V6.2C21 5.0799 21 4.51984 20.782 4.09202C20.5903 3.71569 20.2843 3.40973 19.908 3.21799C19.4802 3 18.9201 3 17.8 3H6.2C5.0799 3 4.51984 3 4.09202 3.21799C3.71569 3.40973 3.40973 3.71569 3.21799 4.09202C3 4.51984 3 5.07989 3 6.2V13.8C3 14.9201 3 15.4802 3.21799 15.908C3.40973 16.2843 3.71569 16.5903 4.09202 16.782C4.51984 17 5.07989 17 6.2 17Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    System
                  </button>
                </div>
              </div>
            </div>
            <a href="https://github.com/debjitbis08/diceware" target="_blank" class="flex items-center gap-1 text-blue-600 dark:text-blue-400">
                <div class="text-black dark:text-white">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                          <g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="currentColor">
                              <g id="icons" transform="translate(56.000000, 160.000000)">
                                  <path d="M94,7399 C99.523,7399 104,7403.59 104,7409.253 C104,7413.782 101.138,7417.624 97.167,7418.981 C96.66,7419.082 96.48,7418.762 96.48,7418.489 C96.48,7418.151 96.492,7417.047 96.492,7415.675 C96.492,7414.719 96.172,7414.095 95.813,7413.777 C98.04,7413.523 100.38,7412.656 100.38,7408.718 C100.38,7407.598 99.992,7406.684 99.35,7405.966 C99.454,7405.707 99.797,7404.664 99.252,7403.252 C99.252,7403.252 98.414,7402.977 96.505,7404.303 C95.706,7404.076 94.85,7403.962 94,7403.958 C93.15,7403.962 92.295,7404.076 91.497,7404.303 C89.586,7402.977 88.746,7403.252 88.746,7403.252 C88.203,7404.664 88.546,7405.707 88.649,7405.966 C88.01,7406.684 87.619,7407.598 87.619,7408.718 C87.619,7412.646 89.954,7413.526 92.175,7413.785 C91.889,7414.041 91.63,7414.493 91.54,7415.156 C90.97,7415.418 89.522,7415.871 88.63,7414.304 C88.63,7414.304 88.101,7413.319 87.097,7413.247 C87.097,7413.247 86.122,7413.234 87.029,7413.87 C87.029,7413.87 87.684,7414.185 88.139,7415.37 C88.139,7415.37 88.726,7417.2 91.508,7416.58 C91.513,7417.437 91.522,7418.245 91.522,7418.489 C91.522,7418.76 91.338,7419.077 90.839,7418.982 C86.865,7417.627 84,7413.783 84,7409.253 C84,7403.59 88.478,7399 94,7399" id="github-[#142]">

                  </path>
                              </g>
                          </g>
                      </g>
                  </svg>
                </div>
            </a>
        </div>
      </header>
      <main class="flex flex-col items-center justify-center max-w-6xl mx-auto p-6">
          <!-- Subheading -->
          <div class="text-center mb-8">
            <h1 class="text-3xl font-bold">Diceware Generator</h1>
            <h2 class="text-lg font-medium text-gray-600 dark:text-gray-400 mt-2">Generate passphrases or secure random strings using virtual or physical dice.</h2>
          </div>
          <div class="container mx-auto p-6 bg-white dark:bg-gray-800 shadow-lg rounded-lg flex flex-col md:flex-row gap-6">
            <div class="flex-1 form-container">
                <!-- Option to choose between Random String or Passphrase -->
                <div class="mb-4">
                <label for="generation-type" class="block text-sm font-medium mb-2">Choose Type:</label>
                <!-- <select id="generation-type" class="border border-gray-300 dark:border-gray-600 p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500"> -->
                <select id="generation-type" class="border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="passphrase" selected>Passphrase (Diceware)</option>
                    <option value="random-string">Random String</option>
                </select>
                </div>

                <!-- Checkbox to use virtual dice -->
                <div class="mb-4">
                    <input type="checkbox" id="use-virtual-dice" checked class="mr-2">
                    <label for="use-virtual-dice" class="text-sm font-medium">Use Virtual Dice</label>
                </div>

                <!-- Input for number of dice (4 or 5 for passphrase, dynamic for random string) -->
                <div id="dice-selection" class="mb-4">
                <label for="dice-count" class="block text-sm font-medium mb-2">Number of dice:</label>
                <select id="dice-count" class="border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <!-- Dynamic options based on the type and entropy -->
                </select>
                </div>

                <!-- Input for target entropy (only for random string) -->
                <div id="entropy-selection" class="mb-4">
                <label for="target-entropy" class="block text-sm font-medium mb-2">Target Entropy:</label>
                <select id="target-entropy" class="border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="128">128 bits (16 bytes)</option>
                    <option value="256" selected>256 bits (32 bytes)</option>
                    <option value="512">512 bits (64 bytes)</option>
                </select>
                </div>

                <!-- Input for number of words (only for passphrase) -->
                <div id="word-selection" class="mb-4 hidden">
                <label for="word-count" class="block text-sm font-medium mb-2">Number of Words:</label>
                <select id="word-count" class="border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="4">4 Words</option>
                    <option value="5" selected>5 Words</option>
                    <option value="6">6 Words</option>
                    <option value="7">7 Words</option>
                </select>
                </div>

                <!-- Number of rolls will be automatically calculated -->
                <div id="rolls-selection" class="mb-4 hidden">
                    <label for="roll-count" class="block text-sm font-medium mb-2">Number of Rolls:</label>
                    <input type="number" id="roll-count" value="1" readonly class="border border-gray-300 dark:border-gray-600 p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Dropdown for output format (only for random string) -->
                <div id="output-format-selection" class="mb-6">
                    <label for="output-format" class="block text-sm font-medium mb-2">Output Format:</label>
                    <select id="output-format" class="border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="base64" selected>Base64</option>
                        <option value="hex">Hexadecimal</option>
                    </select>
                </div>

                <!-- Generate button -->
                <button id="generate" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500">Generate</button>

                <!-- Output section for passphrase with different formats -->
                <div class="mt-6 hidden" id="output-section">
                  <h2 id="output-header" class="text-xl font-bold mb-2">Selected Words</h2>

                  <div id="random-string-output">
                      <!-- Random string output -->
                      <!-- <p id="output" class="hidden border border-gray-300 dark:border-gray-600 p-4 mt-2 rounded bg-gray-100 dark:bg-gray-700 text-black dark:text-white"></p> -->
                      <div class="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg shadow-inner relative mb-2 flex gap-2 items-center" id="space-passphrase">
                        <p id="output" class="flex-1 text-blue-600 font-mono"></p>
                        <button id="copy-random-string-btn" class="text-black bg-gray-300 hover:bg-gray-400 text-xs py-1 px-2 ml-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                          Copy
                        </button>
                      </div>
                  </div>

                  <div id="passphrase-output">
                      <!-- Passphrase words (normal display) -->
                      <div class="mb-4 border border-gray-300 dark:border-gray-600 p-4 mt-2 rounded bg-gray-100 dark:bg-gray-700 text-black dark:text-white">
                        <p id="passphrase-words" class="text-xl tracking-wide font-mono text-center"></p>
                      </div>

                      <!-- Space-separated and Hyphen-separated passphrase in smaller sections -->
                      <div class="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg shadow-inner">
                        <h3 class="font-semibold mb-2">Passphrase with spaces or dashes</h3>

                        <!-- Space-separated passphrase -->
                        <div class="relative mb-2 flex items-center" id="space-passphrase">
                          <p id="passphrase-space" class="flex-1 text-blue-400 font-mono"></p>
                          <button id="copy-space-btn" class="text-black bg-gray-300 hover:bg-gray-400 text-xs py-1 px-2 ml-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                            Copy
                          </button>
                        </div>

                        <!-- Hyphen-separated passphrase -->
                        <div class="relative mb-2 flex items-center" id="hyphen-passphrase">
                          <p id="passphrase-hyphen" class="flex-1 text-blue-400 font-mono"></p>
                          <button id="copy-hyphen-btn" class="text-black bg-gray-300 hover:bg-gray-400 text-xs py-1 px-2 ml-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                            Copy
                          </button>
                        </div>
                  </div>
                </div>
                </div>
            </div>

            <!-- Dice Rolls Section -->
            <div class="flex-1 dice-rolls-container p-4 bg-gray-100 dark:bg-gray-900 rounded-lg shadow-inner overflow-hidden">
                <h2 class="text-xl font-semibold mb-4">Dice Rolls</h2>
                <div class="overflow-y-auto pb-8" style="height:calc(100% - 1.95em);">
                    <div id="dice-rolls" class="space-y-4">
                    <!-- Dynamic input fields or virtual dice results will be inserted here -->
                    </div>
                </div>
            </div>
          </div>
      </main>

      <aside class="mt-6 pb-12 max-w-3xl mx-auto space-y-8">
        <!-- Purpose Section -->
        <div>
          <h3 class="text-2xl font-semibold mb-2">Purpose</h3>
          <p class="text-gray-700 dark:text-gray-300">
            <a href="https://theworld.com/~reinhold/diceware.html" class="text-blue-600 dark:text-blue-400 hover:underline">Diceware</a> is
            an excellent way to generate passphrases. It provides a fun and secure method that anyone can use, without requiring knowledge
            of cryptography or mathematics. Rather than repeat what has been said better elsewhere, let me provide some great links.

            <ul class="mt-4 list-disc list-inside text-gray-700 dark:text-gray-300">
                <li>
                    <a href="https://www.eff.org/dice" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Dice generated passphrases instructions by EFF</a>
                </li>
                <li>
                    <a href="https://theworld.com/~reinhold/diceware.html" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Original Diceware page by A G Reinhold</a>
                </li>
            </ul>
          </p>
          <p class="mt-2 text-gray-700 dark:text-gray-300">
            This application was created to allow the generation of random strings by rolling physical dice. While simpler methods exist, such as the following NodeJS script:
            <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-md">require('crypto').randomBytes(32).toString('base64');</code>, I wanted to have some fun and create a tool for manual dice rolling!
          </p>

          <p class="mt-4">(Diceware is a trademark of A G Reinhold)</p>
        </div>

        <!-- Alternatives Section -->
        <div>
          <h3 class="text-2xl font-semibold mb-2">Alternatives</h3>
          <p class="text-gray-700 dark:text-gray-300">
            There are many applications that generate passphrases using Diceware, either by employing a
            <a href="https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Cryptographically Secure Pseudo Random Number Generator (CSPRNG)</a> or by allowing users to manually enter physical dice roll results.
          </p>
          <p class="mt-2 text-gray-700 dark:text-gray-300">
            However, I wanted to build an application that generates not only passphrases but also random strings from physical dice rolls.
          </p>

          <ul class="mt-4 list-disc list-inside text-gray-700 dark:text-gray-300">
              <li>
                <a href="https://diceware.rempe.us/" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Diceware Rempe</a> - Supports multiple languages and allows manually entering dice rolls.
              </li>
              <li>
                <a href="https://diceware.dmuth.org/" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Diceware Password Generator</a> - Supports only virtual dice.
              </li>
          </ul>
        </div>

        <div id="faqs">
            <h3 class="text-2xl font-semibold mb-2">Frequently Asked Questions</h3>
            <div class="mt-2">
                <div>
                    <details>
                        <summary class="text-blue-600 dark:text-blue-400 hover:underline cursor-pointer">
                            Is rolling dice really helpful to generate random strings?
                        </summary>
                        <p class="mt-2">
                            No. I don't know if it is useful or even better. I wanted to do it,
                            but there are much simpler methods available. Such as running,
                            the below NodeJS code.
                            <code class="text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-md my-2 block">require('crypto').randomBytes(32).toString('base64');</code>
                            or this shell command <code class="text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-md my-2 block">openssl rand -base64 32</code>
                        </p>
                    </details>
                </div>
                <div>
                    <details>
                        <summary class="text-blue-600 dark:text-blue-400 hover:underline cursor-pointer">
                            Does the application track any data?
                        </summary>
                        <p class="mt-2">
                            No. The application does not track anything. There are no logs generated.
                        </p>
                    </details>
                </div>
                <div>
                    <details>
                        <summary class="text-blue-600 dark:text-blue-400 hover:underline cursor-pointer">
                            What word list is used to generate the passphrase?
                        </summary>
                        <p class="mt-2">
                            The wordlists used are from <a href="https://www.eff.org/dice">EFF</a>. If you choose 5 dice (recommended), then the long word
                            list is used. For 4 dice option the short word list is used.
                        </p>
                    </details>
                </div>
                <div>
                    <details>
                        <summary class="text-blue-600 dark:text-blue-400 hover:underline cursor-pointer">
                            What are the recommended options for passphrase generation?
                        </summary>
                        <p class="mt-2">
                            For passphrases, longer is better. Choose 5 dice option and
                            select at least 6 words.
                        </p>
                        <p class="mt-2">
                            Use real physical dice if possible.
                        </p>
                    </details>
                </div>
                <div>
                    <details>
                        <summary class="text-blue-600 dark:text-blue-400 hover:underline cursor-pointer">
                            How secure is the virtual dice option?
                        </summary>
                        <p class="mt-2">
                            The application uses <a href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues">getRandomValues() function in JavaScript</a>
                            and it is considered the best and secure method of generating
                            random values in the browser.
                        </p>
                        <p class="mt-2">
                            If you don't trust your computer, use dice.
                        </p>
                    </details>
                </div>
            </div>
        </div>
      </aside>

    <!-- Include your JS logic -->
    <script type="module">
      import {
        generate,
        toggleInputFields,
        generateDiceRollInputs,
        updateRollsBasedOnSelection,
        updateDiceOptions,
        copyToClipboard,
      } from './src/main.js';

      toggleInputFields();

      // Attach event handlers
      document.getElementById('generation-type').addEventListener('change', toggleInputFields);
      document.getElementById('dice-count').addEventListener('change', updateRollsBasedOnSelection);
      document.getElementById('generate').addEventListener('click', generate);
      document.getElementById('word-count').addEventListener('change', updateRollsBasedOnSelection);
      document.getElementById('target-entropy').addEventListener('change', () => {
        updateDiceOptions();
        updateRollsBasedOnSelection();
      });
      document.getElementById('copy-space-btn').addEventListener('click', () => copyToClipboard('passphrase-space'));
      document.getElementById('copy-hyphen-btn').addEventListener('click', () => copyToClipboard('passphrase-hyphen'));
      document.getElementById('copy-random-string-btn').addEventListener('click', () => copyToClipboard('output'));
    </script>
    <script>
      (function () {
        const themeButton = document.getElementById('theme-switcher-button');
        const themeDropdown = document.getElementById('theme-dropdown');
        const themeIcon = document.getElementById('theme-icon');
        let isDropdownOpen = false;

        const themeLight = document.getElementById('theme-light');
        const themeDark = document.getElementById('theme-dark');
        const themeSystem = document.getElementById('theme-system');

        // Function to switch themes and update the icon
        function switchTheme(theme) {
          if (theme === 'light') {
            document.documentElement.classList.remove('dark');
            localStorage.setItem('theme', 'light');
            updateIcon('light');
            highlightActiveOption('light');
          } else if (theme === 'dark') {
            document.documentElement.classList.add('dark');
            localStorage.setItem('theme', 'dark');
            updateIcon('dark');
            highlightActiveOption('dark');
          } else if (theme === 'system') {
            localStorage.removeItem('theme');
            if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
              document.documentElement.classList.add('dark');
            } else {
              document.documentElement.classList.remove('dark');
            }
            updateIcon('system');
            highlightActiveOption('system');
          }
        }

        // Update the icon in the theme switcher button based on the selected theme
        function updateIcon(theme) {
          if (theme === 'light') {
            themeIcon.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>`;
          } else if (theme === 'dark') {
            themeIcon.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>`;
          } else {
            themeIcon.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path d="M7 21H17M9 17V21M15 17V21M6.2 17H17.8C18.9201 17 19.4802 17 19.908 16.782C20.2843 16.5903 20.5903 16.2843 20.782 15.908C21 15.4802 21 14.9201 21 13.8V6.2C21 5.0799 21 4.51984 20.782 4.09202C20.5903 3.71569 20.2843 3.40973 19.908 3.21799C19.4802 3 18.9201 3 17.8 3H6.2C5.0799 3 4.51984 3 4.09202 3.21799C3.71569 3.40973 3.40973 3.71569 3.21799 4.09202C3 4.51984 3 5.07989 3 6.2V13.8C3 14.9201 3 15.4802 3.21799 15.908C3.40973 16.2843 3.71569 16.5903 4.09202 16.782C4.51984 17 5.07989 17 6.2 17Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>`;
          }
        }

        // Highlight the active theme option in the dropdown
        function highlightActiveOption(theme) {
          themeLight.classList.remove('text-blue-700', 'dark:text-blue-400');
          themeDark.classList.remove('text-blue-700', 'dark:text-blue-400');
          themeSystem.classList.remove('text-blue-700', 'dark:text-blue-400');
          // text-gray-700 dark:text-gray-200

          if (theme === 'light') {
            themeLight.classList.add('text-blue-700', 'dark:text-blue-400');
            themeDark.classList.remove('text-gray-700', 'dark:text-gray-200');
            themeSystem.classList.remove('text-gray-700', 'dark:text-gray-200');
          } else if (theme === 'dark') {
            themeDark.classList.add('text-blue-700', 'dark:text-blue-400');
            themeLight.classList.remove('text-gray-700', 'dark:text-gray-200');
            themeSystem.classList.remove('text-gray-700', 'dark:text-gray-200');
          } else {
            themeSystem.classList.add('text-blue-700', 'dark:text-blue-400');
            themeLight.classList.remove('text-gray-700', 'dark:text-gray-200');
            themeDark.classList.remove('text-gray-700', 'dark:text-gray-200');
          }
        }

        // Event listeners for theme options
        themeLight.addEventListener('click', () => switchTheme('light'));
        themeDark.addEventListener('click', () => switchTheme('dark'));
        themeSystem.addEventListener('click', () => switchTheme('system'));

        // Toggle the dropdown visibility
        themeButton.addEventListener('click', () => {
          isDropdownOpen = !isDropdownOpen;
          themeDropdown.classList.toggle('hidden', !isDropdownOpen);
        });

        // Close the dropdown if clicking outside
        document.addEventListener('click', (event) => {
          if (!themeButton.contains(event.target) && !themeDropdown.contains(event.target)) {
            themeDropdown.classList.add('hidden');
            isDropdownOpen = false;
          }
        });

        // Load saved theme or system theme on page load
        window.addEventListener('load', () => {
          const savedTheme = localStorage.getItem('theme');
          if (savedTheme === 'dark') {
            switchTheme('dark');
          } else if (savedTheme === 'light') {
            switchTheme('light');
          } else {
            switchTheme('system');
          }
        });
      }());
    </script>
  </body>
</html>
